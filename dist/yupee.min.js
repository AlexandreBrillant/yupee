const $$=($$=>{class Yupees{static#singleton=null;static#singletonController=true;static instance(){if(Yupees.#singleton==null){Yupees.#singletonController=false;Yupees.#singleton=new Yupees;Yupees.#singletonController=true}return Yupees.#singleton}constructor(){if(Yupees.#singletonController)throw new"Illegal usage for the Yupees, use Yupees.instance()"}#yupeesStack=[];#startLoading=false;#listeners={};#data={};listen(eventId,handler){if(typeof this.#listeners[eventId]=="undefined"){this.#listeners[eventId]=[]}this.#listeners[eventId].push({handler:handler})}fire(eventId,...args){if(this.#listeners[eventId]){this.#listeners[eventId].forEach(obj=>{const handler=obj.handler;handler(obj.source,...args)})}}data(key,...args){if(args.length==0){if(typeof this.#data[key]=="undefined"){return null}else return this.#data[key]}else{this.#data[key]=args[0]}}loadComponent(location,params){this.#yupeesStack.push({location:location,params:params});if(!this.#startLoading){this.#startLoading=true;this.loadNextComponent()}}#currentParams=null;loadNextComponent(){const component=this.#yupeesStack.shift();if(typeof component!="undefined"){let{location:location,params:params}=component;if(!location.includes("."))location+=".js";const scriptNode=document.createElement("script");scriptNode.addEventListener("load",()=>{Yupees.#singleton.loadNextComponent()});scriptNode.src=location;this.#currentParams=params;document.head.appendChild(scriptNode)}}start(){const currentComponent=new Yup(this.#currentParams);return currentComponent}}class Yup{#view;#eventStack;#actionStack;#params;constructor(params){this.#params=params;this.#eventStack=[];this.#actionStack=[];this.#view=document.body}#binder(func){const that=this;return function(...args){args.push(that);func.apply(that,args)}}param(paramkey,defaultValue){if(this.#params&&this.#params[paramkey])return this.#params[paramkey];return defaultValue}paint(html){this.clean();if(html instanceof Node){this.#view.appendChild(html)}else this.#view.innerHTML=html;this.#eventStack.forEach(handler=>{handler()});this.#eventStack.splice(0,this.#eventStack.length);this.#actionStack.forEach(action=>{action()});this.#actionStack.splice(0,this.#actionStack.length);return this}style(values){for(let property in values){this.#view.style[property]=values[property]}return this}event(evt,handler){this.#eventStack.push(()=>{this.#view.addEventListener(evt,this.#binder(handler))});return this}action(handler){this.#actionStack.push(this.#binder(handler));return this}into(cssselector){try{const node=document.querySelector(cssselector);if(node!=null){this.#view=node}}catch(error){console.log(`Invalid selector [${cssselector} / ${error.message}] ? using document.body`);this.#view=document.body}return this}intoid(id){return this.into("@"+id)}getView(){return this.#view}clean(){const parentNode=this.#view;while(parentNode.firstChild)parentNode.removeChild(parentNode.firstChild);return this}selectAll(cssSelector){return this.getView().querySelectorAll(cssSelector)}select(cssSelector){return this.getView().querySelector(cssSelector)}}function _startingAll(){if(starting){starting.forEach(starting=>starting())}starting=null}let starting=[];let ready=false;const rooter=(...args)=>{if(document.body)ready=true;init=()=>{let usage=null;if(args.length)usage=args[0];const yupees=Yupees.instance();if(typeof usage=="object"){const{load:load,params:params}=usage;yupees.loadComponent(load,params)}};if(ready)init();else{starting.push(init);document.addEventListener("DOMContentLoaded",()=>{ready=true;_startingAll()})}};$$.rooter=rooter;$$.start=()=>Yupees.instance().start();$$.load=(yupcomponent,params)=>{rooter({load:yupcomponent,params:params});return $$};$$.listen=(actionId,...actions)=>{actions.forEach(action=>Yupees.instance().listen(actionId,action));return $$};$$.fire=(actionId,...params)=>{Yupees.instance().fire(actionId,params);return $$};$$.data=(key,...params)=>{if(params.length==0)return Yupees.instance().data(key,...params);Yupees.instance().data(key,...params);return $$};return $$})({}||$$);